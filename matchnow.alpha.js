!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MatchNow=t():e.MatchNow=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Auth:()=>O,EventBanner:()=>n});const n=(e=>{const t="eventBannerSlider",n={arrows:!1,focusOnSelect:!0,variableWidth:!0,infinite:!0,speed:1e4,autoplay:!0,autoplaySpeed:0,slidesToScroll:1,slidesToShow:1,cssEase:"linear"};let o;return{start:function(e){o=$(e),this.render()},render:function(){if(!o)return;const e='<div class="event__banner"><div id="'+t+'" class="slick slick-slider"><div class="slick-slide"><a href="/promotion" class="event__banner__text"><i></i>The first month, <em>50% discount for the first month</em></a></div><div class="slick-slide"><a href="/promotion" class="event__banner__text"><i></i>The first month, <em>50% discount for the first month</em></a></div></div></div>';o.html(e),this.run()},run:function(){o.find("#"+t).slick(n)}}})(),o={getItem:e=>{const t=document.cookie.split(";");let n=null;for(let o of t){const[t,i]=o.trim().split("=");if(e===t){n=i;break}}return n},setItem:(e,t,n,o)=>{let i=`${e}=${encodeURIComponent(t)}`;n?.constructor===Date&&(i+="; expires="+n.toUTCString()),o&&(i+="; domain="+o),document.cookie=i}},i=e=>null==e||(void 0===e||("string"==typeof e&&""===e.trim()||(!!(Array.isArray(e)&&e.length<1)||"object"==typeof e&&Object.keys(e).length<1))),r=e=>!i(e),s="page",c="web",l="live",a="Invalid Type",h="Requried clientId",d="Requried redirectUri",u="Not found access token",f="Request failed verify token",m="Request failed get user profile",p="accessToken",I="wematchnow_at",y="wematchnow_rt",T={DEV:"https://dev-member.wematchnow.com",LIVE:"https://member.wematchnow.com"},v="/login",w="/modify",g={DEV:"https://dev-api.wematchnow.com",LIVE:"https://api.wematchnow.com"},A="/ext/auth/v1/oauth/token/verify",b="/ext/member/v1/user",_={X_CLIENT_ID:"X-Client-Id",AUTHORIZATION:"Authorization",X_OWNER_CONTENT:"X-Owner-Content"},k={AUTHORIZATION_TYPE:"bearer"},O=class{#e;#t;#n;constructor({clientId:e,clientSecret:t,redirectUri:n,displayType:o=s,osType:r=c,environment:a=l}){i(e)&&new Error(h),i(n)&&new Error(d),this.#e=e,this.#t=t,this.redirectUri=n,this.displayType=o,this.osType=r,this.environment=a.toUpperCase(),this.#n=this.#o()}#o(){const e=(()=>{const e=window.location.search;return 0===e.indexOf("?")?e.slice(1,e.length):null})();let t=null;if(r(e)&&e.includes(p))t=(e=>{if(null==e)return null;const t={};return e.split("&").map((e=>{let[n,o]=e.split("=");t[n]=o})),t})(e);else{const e=o.getItem(I),n=o.getItem(y);r(e)&&(t={accessToken:e,refreshToken:n})}return t}#i(){o.setItem(I,this.#n.accessToken,new Date(Number(this.#n.expiresIn))),o.setItem(y,this.#n.refreshToken,new Date(Number(this.#n.refreshTokenExpiresIn)))}#r(){this.#n=null,o.removeItem(I),o.removeItem(y)}openSignIn(){const e=T[this.environment]+v+(e=>{let t="";return Object.entries(e).map((([e,n])=>{r(n)&&(t+=""===t?"?":"&",t+=`${e}=${encodeURIComponent(n)}`)})),t})({clientId:this.#e,redirectUri:this.redirectUri,displayType:this.displayType,osType:this.osType});this.displayType===s?window.location.href=e:window.open(e,"MEMBERSHIP","left=0, top=0, width=375, height=667")}openMyProfile(){const e=T[this.environment]+w;window.location.href=e}async signIn(e){if("function"!=typeof e)throw new TypeError(a);const t=this.#n?.accessToken;if(i(t))return e({code:-1,message:u});try{const n=await fetch(g[this.environment]+A,{headers:{[_.X_CLIENT_ID]:this.#e,[_.AUTHORIZATION]:`${k.AUTHORIZATION_TYPE} ${t}`}});if(!n.ok&&200!==n.status)return this.#r(),e({code:-1,message:f});const o=await n.json();return 0===o.code?this.#i():this.#r(),e(o)}catch(t){return e({code:-1,message:f})}}async getUserProfile(e){if("function"!=typeof e)throw new TypeError(a);const t=this.#n?.accessToken;if(i(t))return e({code:-1,message:u});try{const n=await fetch(g[this.environment]+b,{headers:{[_.X_CLIENT_ID]:this.#e,[_.AUTHORIZATION]:t}});if(!n.ok&&200!==n.status)return e({code:-1,message:m});const o=await n.json();return e({code:o.code,message:o.message,value:o.value})}catch(t){return e({code:-1,message:m})}}};return t})()));